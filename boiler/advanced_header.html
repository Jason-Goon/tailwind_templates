<!-- header -->
<header class="fixed top-0 left-0 w-full backdrop-blur-md py-4 z-50">
    <nav class="container mx-auto px-4 flex flex-wrap justify-between items-center">
        <!-- button -->
        <div class="block md:hidden flex justify-between items-center w-full">
            <button id="menu-toggle" class="header-text focus:outline-none">
                <i class="fas fa-bars text-2xl"></i>
            </button>
            <!-- language switcher fin/en -->
            <div class="language-switcher cursor-pointer" onclick="switchLanguage()">EN | FI</div>
        </div>

        <!-- desktop menu -->
        <div id="menu" class="hidden md:flex flex-col md:flex-row md:space-x-4 w-full md:w-auto">
            <div class="flex flex-col md:flex-row space-y-2 md:space-y-0 w-full md:w-auto">
                <a href="index.html" class="header-text hover:text-highlight md:px-4" data-en="Home" data-fi="Koti">Koti</a>
                <a href="services.html" class="header-text hover:text-highlight md:px-4" data-en="Services" data-fi="Palvelut">Palvelut</a>
                <a href="projects.html" class="header-text hover:text-highlight md:px-4" data-en="Projects" data-fi="Projektit">Projektit</a>
                <a href="ai.html" class="header-text hover:text-highlight md:px-4" data-en="AI" data-fi="AI">AI</a>
                <a href="contact.html" class="header-text hover:text-highlight md:px-4" data-en="Contact" data-fi="Yhteystiedot">Yhteystiedot</a>
            </div>
        </div>

        <!--desktop lang switcher -->
        <div class="language-switcher cursor-pointer hidden md:block" onclick="switchLanguage()">EN | FI</div>
    </nav>

    <!-- menu toggle and lang switcher -->
    <script>
        function switchLanguage() {
            const elements = document.querySelectorAll('[data-en]');
            const currentLang = document.documentElement.lang;
            const newLang = currentLang === 'fi' ? 'en' : 'fi';

            elements.forEach(element => {
                element.textContent = element.getAttribute(`data-${newLang}`);
            });

            document.documentElement.lang = newLang;
            localStorage.setItem('selectedLanguage', newLang); // Store the selected language in localStorage
        }

        document.addEventListener('DOMContentLoaded', function () {
            const savedLanguage = localStorage.getItem('selectedLanguage');
            if (savedLanguage) {
                document.documentElement.lang = savedLanguage;
                const elements = document.querySelectorAll('[data-en]');
                elements.forEach(element => {
                    element.textContent = element.getAttribute(`data-${savedLanguage}`);
                });
            }

            const menuToggle = document.getElementById('menu-toggle');
            const menu = document.getElementById('menu');
            if (menuToggle && menu) {
                menuToggle.addEventListener('click', function () {
                    menu.classList.toggle('hidden');
                });
            }

            document.querySelectorAll('.language-switcher').forEach(switcher => {
                switcher.addEventListener('click', switchLanguage);
            });
        });
    </script>
</header>
